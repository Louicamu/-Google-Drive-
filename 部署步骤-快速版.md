# ⚡ Vercel 部署快速步骤

## 🎯 简明版（15分钟完成）

### 准备工作 ✅

**已完成**：
- ✅ 代码已提交到 Git
- ✅ 项目配置已优化
- ✅ 部署文件已创建

---

## 步骤 1️⃣：MongoDB Atlas（5分钟）

### 快速操作

1. **注册**: https://www.mongodb.com/cloud/atlas/register
   - 使用 Google 账号快速注册

2. **创建集群**:
   - 选择 "M0 Free"
   - 服务器位置：Singapore
   - 点击 Create

3. **创建用户**:
   - Database Access → Add New User
   - 用户名：`nextdrive_admin`
   - 密码：自己设置（记住！）
   - 权限：Atlas Admin

4. **网络访问**:
   - Network Access → Add IP Address
   - 选择：Allow Access from Anywhere (0.0.0.0/0)

5. **获取连接字符串**:
   - Database → Connect → Drivers
   - 复制连接字符串
   - 替换 `<password>` 为你的密码
   - 在末尾添加 `/nextdrive`

**最终连接字符串示例**：
```
mongodb+srv://nextdrive_admin:你的密码@cluster.xxxxx.mongodb.net/nextdrive?retryWrites=true&w=majority
```

---

## 步骤 2️⃣：GitHub（2分钟）

### 快速操作

1. **创建仓库**: https://github.com/new
   - 名称：`next-drive`
   - 类型：Private
   - 不要勾选任何初始化选项
   - Create repository

2. **推送代码**（在项目目录）:
   ```powershell
   # 已经完成 git add 和 commit
   
   # 添加远程仓库（替换你的用户名）
   git remote add origin https://github.com/你的用户名/next-drive.git
   
   # 推送
   git branch -M main
   git push -u origin main
   ```

---

## 步骤 3️⃣：Vercel 部署（5分钟）

### 快速操作

1. **登录 Vercel**: https://vercel.com/login
   - 使用 GitHub 账号登录

2. **导入项目**:
   - Add New... → Project
   - 选择 `next-drive` 仓库
   - Import

3. **配置环境变量**:

   点击 "Environment Variables"，添加：

   **MONGODB_URI**
   ```
   mongodb+srv://nextdrive_admin:你的密码@cluster.xxxxx.mongodb.net/nextdrive?retryWrites=true&w=majority
   ```

   **NEXTAUTH_URL**
   ```
   https://你的项目名.vercel.app
   ```
   （先随便填，部署后再改）

   **NEXTAUTH_SECRET**
   ```
   在 PowerShell 运行生成:
   -join ((48..57) + (65..90) + (97..122) | Get-Random -Count 32 | ForEach-Object {[char]$_})
   ```

4. **部署**:
   - 点击 "Deploy"
   - 等待 2-3 分钟

5. **更新 NEXTAUTH_URL**:
   - 部署完成后，复制域名（如：https://next-drive-abc123.vercel.app）
   - Settings → Environment Variables
   - 编辑 NEXTAUTH_URL 为实际域名
   - Deployments → 最新部署 → Redeploy

---

## 步骤 4️⃣：Vercel Blob（3分钟）

### 快速操作

1. **创建 Blob Store**:
   - 项目页面 → Storage → Create Database
   - 选择 "Blob"
   - 名称：`nextdrive-files`
   - Create

2. **连接到项目**:
   - Connect Project → 选择你的项目
   - Connect

3. **重新部署**:
   - Deployments → 最新部署 → ... → Redeploy
   - 勾选 "Use existing Build Cache"
   - Redeploy

---

## 步骤 5️⃣：验证部署 ✅

### 测试清单

访问你的应用：`https://你的项目.vercel.app`

```
✅ 打开首页
✅ 注册新用户
✅ 登录成功
✅ 创建文件夹
✅ 上传文件（使用 Blob API）
✅ 下载文件
✅ 创建分享链接
✅ 访问分享链接
```

---

## 🎉 完成！

你的 NextDrive 现在已经在线了！

**应用地址**: https://你的项目.vercel.app

---

## 📝 后续更新

每次代码更新：

```powershell
git add .
git commit -m "更新说明"
git push origin main
```

Vercel 会自动重新部署！

---

## 🆘 遇到问题？

### 常见错误

**MongoDB 连接失败**：
- 检查连接字符串
- 确认密码正确
- 确认 IP 白名单设置

**环境变量未生效**：
- 重新检查拼写
- 重新部署项目

**文件上传失败**：
- 确认已创建 Blob Store
- 确认已重新部署

### 查看详细文档

- `部署到Vercel指南.md` - 完整详细步骤
- `快速部署脚本.md` - 命令清单

---

**预计总时间**: 15-20 分钟  
**难度**: ⭐⭐⭐ 中等  

祝部署顺利！🚀

